!function(t){var n={};function e(r){if(n[r])return n[r].exports;var i=n[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,e),i.l=!0,i.exports}e.m=t,e.c=n,e.d=function(t,n,r){e.o(t,n)||Object.defineProperty(t,n,{enumerable:!0,get:r})},e.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},e.t=function(t,n){if(1&n&&(t=e(t)),8&n)return t;if(4&n&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(e.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&n&&"string"!=typeof t)for(var i in t)e.d(r,i,function(n){return t[n]}.bind(null,i));return r},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,n){return Object.prototype.hasOwnProperty.call(t,n)},e.p="",e(e.s=20)}([function(t,n,e){"use strict";var r=e(2);e.o(r,"MESSAGE")&&e.d(n,"MESSAGE",function(){return r.MESSAGE}),e.o(r,"RenderableId")&&e.d(n,"RenderableId",function(){return r.RenderableId}),e.o(r,"WorkerCommand")&&e.d(n,"WorkerCommand",function(){return r.WorkerCommand});var i=e(3);e.o(i,"MESSAGE")&&e.d(n,"MESSAGE",function(){return i.MESSAGE}),e.o(i,"RenderableId")&&e.d(n,"RenderableId",function(){return i.RenderableId}),e.o(i,"WorkerCommand")&&e.d(n,"WorkerCommand",function(){return i.WorkerCommand});var a=e(4);e.o(a,"MESSAGE")&&e.d(n,"MESSAGE",function(){return a.MESSAGE}),e.o(a,"RenderableId")&&e.d(n,"RenderableId",function(){return a.RenderableId}),e.o(a,"WorkerCommand")&&e.d(n,"WorkerCommand",function(){return a.WorkerCommand});var o=e(5);e.o(o,"MESSAGE")&&e.d(n,"MESSAGE",function(){return o.MESSAGE}),e.o(o,"RenderableId")&&e.d(n,"RenderableId",function(){return o.RenderableId}),e.o(o,"WorkerCommand")&&e.d(n,"WorkerCommand",function(){return o.WorkerCommand});var u=e(6);e.o(u,"MESSAGE")&&e.d(n,"MESSAGE",function(){return u.MESSAGE}),e.o(u,"RenderableId")&&e.d(n,"RenderableId",function(){return u.RenderableId}),e.o(u,"WorkerCommand")&&e.d(n,"WorkerCommand",function(){return u.WorkerCommand});var c=e(7);e.d(n,"RenderableId",function(){return c.a});var s=e(8);e.d(n,"MESSAGE",function(){return s.a}),e.d(n,"WorkerCommand",function(){return s.b});e(9),e(1),e(10)},function(t,n,e){"use strict";var r;e.d(n,"a",function(){return r}),function(t){t.UP="up",t.DOWN="down",t.NEUTRAL="neutral",t.SERVE="serve"}(r||(r={}))},function(t,n){},function(t,n){},function(t,n){},function(t,n){},function(t,n){},function(t,n,e){"use strict";var r;e.d(n,"a",function(){return r}),function(t){t[t.BALL=0]="BALL",t[t.PADDLE1=1]="PADDLE1",t[t.PADDLE2=2]="PADDLE2",t[t.SCOREBOARD=3]="SCOREBOARD",t[t.BG=4]="BG"}(r||(r={}))},function(t,n,e){"use strict";e.d(n,"a",function(){return i}),e.d(n,"b",function(){return r});var r,i="message";!function(t){t[t.WORKER_START=0]="WORKER_START",t[t.WORKER_READY=1]="WORKER_READY",t[t.TICK=2]="TICK",t[t.RENDER=3]="RENDER",t[t.CONTROLLER1=4]="CONTROLLER1",t[t.CONTROLLER2=5]="CONTROLLER2",t[t.AI_UPDATE=6]="AI_UPDATE",t[t.AI_CONTROLLER=7]="AI_CONTROLLER",t[t.COLLISION=8]="COLLISION"}(r||(r={}))},function(t,n){},function(t,n){},function(t,n,e){var r;!function(){function i(t,n,e){return t.call.apply(t.bind,arguments)}function a(t,n,e){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var e=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(e,r),t.apply(n,e)}}return function(){return t.apply(n,arguments)}}function o(t,n,e){return(o=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?i:a).apply(null,arguments)}var u=Date.now||function(){return+new Date};function c(t,n){this.a=t,this.o=n||t,this.c=this.o.document}var s=!!window.FontFace;function f(t,n,e,r){if(n=t.c.createElement(n),e)for(var i in e)e.hasOwnProperty(i)&&("style"==i?n.style.cssText=e[i]:n.setAttribute(i,e[i]));return r&&n.appendChild(t.c.createTextNode(r)),n}function l(t,n,e){(t=t.c.getElementsByTagName(n)[0])||(t=document.documentElement),t.insertBefore(e,t.lastChild)}function d(t){t.parentNode&&t.parentNode.removeChild(t)}function h(t,n,e){n=n||[],e=e||[];for(var r=t.className.split(/\s+/),i=0;i<n.length;i+=1){for(var a=!1,o=0;o<r.length;o+=1)if(n[i]===r[o]){a=!0;break}a||r.push(n[i])}for(n=[],i=0;i<r.length;i+=1){for(a=!1,o=0;o<e.length;o+=1)if(r[i]===e[o]){a=!0;break}a||n.push(r[i])}t.className=n.join(" ").replace(/\s+/g," ").replace(/^\s+|\s+$/,"")}function v(t,n){for(var e=t.className.split(/\s+/),r=0,i=e.length;r<i;r++)if(e[r]==n)return!0;return!1}function m(t,n,e){function r(){u&&i&&a&&(u(o),u=null)}n=f(t,"link",{rel:"stylesheet",href:n,media:"all"});var i=!1,a=!0,o=null,u=e||null;s?(n.onload=function(){i=!0,r()},n.onerror=function(){i=!0,o=Error("Stylesheet failed to load"),r()}):setTimeout(function(){i=!0,r()},0),l(t,"head",n)}function g(t,n,e,r){var i=t.c.getElementsByTagName("head")[0];if(i){var a=f(t,"script",{src:n}),o=!1;return a.onload=a.onreadystatechange=function(){o||this.readyState&&"loaded"!=this.readyState&&"complete"!=this.readyState||(o=!0,e&&e(null),a.onload=a.onreadystatechange=null,"HEAD"==a.parentNode.tagName&&i.removeChild(a))},i.appendChild(a),setTimeout(function(){o||(o=!0,e&&e(Error("Script load timeout")))},r||5e3),a}return null}function p(){this.a=0,this.c=null}function _(t){return t.a++,function(){t.a--,M(t)}}function E(t,n){t.c=n,M(t)}function M(t){0==t.a&&t.c&&(t.c(),t.c=null)}function A(t){this.a=t||"-"}function T(t,n){this.c=t,this.f=4,this.a="n";var e=(n||"n4").match(/^([nio])([1-9])$/i);e&&(this.a=e[1],this.f=parseInt(e[2],10))}function b(t){var n=[];t=t.split(/,\s*/);for(var e=0;e<t.length;e++){var r=t[e].replace(/['"]/g,"");-1!=r.indexOf(" ")||/^\d/.test(r)?n.push("'"+r+"'"):n.push(r)}return n.join(",")}function R(t){return t.a+t.f}function w(t){var n="normal";return"o"===t.a?n="oblique":"i"===t.a&&(n="italic"),n}function S(t){var n=4,e="n",r=null;return t&&((r=t.match(/(normal|oblique|italic)/i))&&r[1]&&(e=r[1].substr(0,1).toLowerCase()),(r=t.match(/([1-9]00|normal|bold)/i))&&r[1]&&(/bold/i.test(r[1])?n=7:/[1-9]00/.test(r[1])&&(n=parseInt(r[1].substr(0,1),10)))),e+n}function y(t,n){this.c=t,this.f=t.o.document.documentElement,this.h=n,this.a=new A("-"),this.j=!1!==n.events,this.g=!1!==n.classes}function x(t){if(t.g){var n=v(t.f,t.a.c("wf","active")),e=[],r=[t.a.c("wf","loading")];n||e.push(t.a.c("wf","inactive")),h(t.f,e,r)}C(t,"inactive")}function C(t,n,e){t.j&&t.h[n]&&(e?t.h[n](e.c,R(e)):t.h[n]())}function P(){this.c={}}function I(t,n){this.c=t,this.f=n,this.a=f(this.c,"span",{"aria-hidden":"true"},this.f)}function L(t){l(t.c,"body",t.a)}function U(t){return"display:block;position:absolute;top:-9999px;left:-9999px;font-size:300px;width:auto;height:auto;line-height:normal;margin:0;padding:0;font-variant:normal;white-space:nowrap;font-family:"+b(t.c)+";font-style:"+w(t)+";font-weight:"+t.f+"00;"}function k(t,n,e,r,i,a){this.g=t,this.j=n,this.a=r,this.c=e,this.f=i||3e3,this.h=a||void 0}function D(t,n,e,r,i,a,o){this.v=t,this.B=n,this.c=e,this.a=r,this.s=o||"BESbswy",this.f={},this.w=i||3e3,this.u=a||null,this.m=this.j=this.h=this.g=null,this.g=new I(this.c,this.s),this.h=new I(this.c,this.s),this.j=new I(this.c,this.s),this.m=new I(this.c,this.s),t=U(t=new T(this.a.c+",serif",R(this.a))),this.g.a.style.cssText=t,t=U(t=new T(this.a.c+",sans-serif",R(this.a))),this.h.a.style.cssText=t,t=U(t=new T("serif",R(this.a))),this.j.a.style.cssText=t,t=U(t=new T("sans-serif",R(this.a))),this.m.a.style.cssText=t,L(this.g),L(this.h),L(this.j),L(this.m)}A.prototype.c=function(t){for(var n=[],e=0;e<arguments.length;e++)n.push(arguments[e].replace(/[\W_]+/g,"").toLowerCase());return n.join(this.a)},k.prototype.start=function(){var t=this.c.o.document,n=this,e=u(),r=new Promise(function(r,i){!function a(){u()-e>=n.f?i():t.fonts.load(function(t){return w(t)+" "+t.f+"00 300px "+b(t.c)}(n.a),n.h).then(function(t){1<=t.length?r():setTimeout(a,25)},function(){i()})}()}),i=null,a=new Promise(function(t,e){i=setTimeout(e,n.f)});Promise.race([a,r]).then(function(){i&&(clearTimeout(i),i=null),n.g(n.a)},function(){n.j(n.a)})};var W={D:"serif",C:"sans-serif"},N=null;function O(){if(null===N){var t=/AppleWebKit\/([0-9]+)(?:\.([0-9]+))/.exec(window.navigator.userAgent);N=!!t&&(536>parseInt(t[1],10)||536===parseInt(t[1],10)&&11>=parseInt(t[2],10))}return N}function G(t,n,e){for(var r in W)if(W.hasOwnProperty(r)&&n===t.f[W[r]]&&e===t.f[W[r]])return!0;return!1}function F(t){var n,e=t.g.a.offsetWidth,r=t.h.a.offsetWidth;(n=e===t.f.serif&&r===t.f["sans-serif"])||(n=O()&&G(t,e,r)),n?u()-t.A>=t.w?O()&&G(t,e,r)&&(null===t.u||t.u.hasOwnProperty(t.a.c))?B(t,t.v):B(t,t.B):function(t){setTimeout(o(function(){F(this)},t),50)}(t):B(t,t.v)}function B(t,n){setTimeout(o(function(){d(this.g.a),d(this.h.a),d(this.j.a),d(this.m.a),n(this.a)},t),0)}function j(t,n,e){this.c=t,this.a=n,this.f=0,this.m=this.j=!1,this.s=e}D.prototype.start=function(){this.f.serif=this.j.a.offsetWidth,this.f["sans-serif"]=this.m.a.offsetWidth,this.A=u(),F(this)};var H=null;function X(t){0==--t.f&&t.j&&(t.m?((t=t.a).g&&h(t.f,[t.a.c("wf","active")],[t.a.c("wf","loading"),t.a.c("wf","inactive")]),C(t,"active")):x(t.a))}function V(t){this.j=t,this.a=new P,this.h=0,this.f=this.g=!0}function K(t,n,e,r,i){var a=0==--t.h;(t.f||t.g)&&setTimeout(function(){var t=i||null,u=r||{};if(0===e.length&&a)x(n.a);else{n.f+=e.length,a&&(n.j=a);var c,s=[];for(c=0;c<e.length;c++){var f=e[c],l=u[f.c],d=n.a,v=f;if(d.g&&h(d.f,[d.a.c("wf",v.c,R(v).toString(),"loading")]),C(d,"fontloading",v),d=null,null===H)if(window.FontFace){v=/Gecko.*Firefox\/(\d+)/.exec(window.navigator.userAgent);var m=/OS X.*Version\/10\..*Safari/.exec(window.navigator.userAgent)&&/Apple/.exec(window.navigator.vendor);H=v?42<parseInt(v[1],10):!m}else H=!1;d=H?new k(o(n.g,n),o(n.h,n),n.c,f,n.s,l):new D(o(n.g,n),o(n.h,n),n.c,f,n.s,t,l),s.push(d)}for(c=0;c<s.length;c++)s[c].start()}},0)}function z(t,n){this.c=t,this.a=n}function Y(t,n){this.c=t,this.a=n}function q(t,n){this.c=t||$,this.a=[],this.f=[],this.g=n||""}j.prototype.g=function(t){var n=this.a;n.g&&h(n.f,[n.a.c("wf",t.c,R(t).toString(),"active")],[n.a.c("wf",t.c,R(t).toString(),"loading"),n.a.c("wf",t.c,R(t).toString(),"inactive")]),C(n,"fontactive",t),this.m=!0,X(this)},j.prototype.h=function(t){var n=this.a;if(n.g){var e=v(n.f,n.a.c("wf",t.c,R(t).toString(),"active")),r=[],i=[n.a.c("wf",t.c,R(t).toString(),"loading")];e||r.push(n.a.c("wf",t.c,R(t).toString(),"inactive")),h(n.f,r,i)}C(n,"fontinactive",t),X(this)},V.prototype.load=function(t){this.c=new c(this.j,t.context||this.j),this.g=!1!==t.events,this.f=!1!==t.classes,function(t,n,e){var r=[],i=e.timeout;!function(t){t.g&&h(t.f,[t.a.c("wf","loading")]),C(t,"loading")}(n);var r=function(t,n,e){var r,i=[];for(r in n)if(n.hasOwnProperty(r)){var a=t.c[r];a&&i.push(a(n[r],e))}return i}(t.a,e,t.c),a=new j(t.c,n,i);for(t.h=r.length,n=0,e=r.length;n<e;n++)r[n].load(function(n,e,r){K(t,a,n,e,r)})}(this,new y(this.c,t),t)},z.prototype.load=function(t){var n=this,e=n.a.projectId,r=n.a.version;if(e){var i=n.c.o;g(this.c,(n.a.api||"https://fast.fonts.net/jsapi")+"/"+e+".js"+(r?"?v="+r:""),function(r){r?t([]):(i["__MonotypeConfiguration__"+e]=function(){return n.a},function n(){if(i["__mti_fntLst"+e]){var r,a=i["__mti_fntLst"+e](),o=[];if(a)for(var u=0;u<a.length;u++){var c=a[u].fontfamily;null!=a[u].fontStyle&&null!=a[u].fontWeight?(r=a[u].fontStyle+a[u].fontWeight,o.push(new T(c,r))):o.push(new T(c))}t(o)}else setTimeout(function(){n()},50)}())}).id="__MonotypeAPIScript__"+e}else t([])},Y.prototype.load=function(t){var n,e,r=this.a.urls||[],i=this.a.families||[],a=this.a.testStrings||{},o=new p;for(n=0,e=r.length;n<e;n++)m(this.c,r[n],_(o));var u=[];for(n=0,e=i.length;n<e;n++)if((r=i[n].split(":"))[1])for(var c=r[1].split(","),s=0;s<c.length;s+=1)u.push(new T(r[0],c[s]));else u.push(new T(r[0]));E(o,function(){t(u,a)})};var $="https://fonts.googleapis.com/css";function Z(t){this.f=t,this.a=[],this.c={}}var Q={latin:"BESbswy","latin-ext":"çöüğş",cyrillic:"йяЖ",greek:"αβΣ",khmer:"កខគ",Hanuman:"កខគ"},J={thin:"1",extralight:"2","extra-light":"2",ultralight:"2","ultra-light":"2",light:"3",regular:"4",book:"4",medium:"5","semi-bold":"6",semibold:"6","demi-bold":"6",demibold:"6",bold:"7","extra-bold":"8",extrabold:"8","ultra-bold":"8",ultrabold:"8",black:"9",heavy:"9",l:"3",r:"4",b:"7"},tt={i:"i",italic:"i",n:"n",normal:"n"},nt=/^(thin|(?:(?:extra|ultra)-?)?light|regular|book|medium|(?:(?:semi|demi|extra|ultra)-?)?bold|black|heavy|l|r|b|[1-9]00)?(n|i|normal|italic)?$/;function et(t,n){this.c=t,this.a=n}var rt={Arimo:!0,Cousine:!0,Tinos:!0};function it(t,n){this.c=t,this.a=n}function at(t,n){this.c=t,this.f=n,this.a=[]}et.prototype.load=function(t){var n=new p,e=this.c,r=new q(this.a.api,this.a.text),i=this.a.families;!function(t,n){for(var e=n.length,r=0;r<e;r++){var i=n[r].split(":");3==i.length&&t.f.push(i.pop());var a="";2==i.length&&""!=i[1]&&(a=":"),t.a.push(i.join(a))}}(r,i);var a=new Z(i);!function(t){for(var n=t.f.length,e=0;e<n;e++){var r=t.f[e].split(":"),i=r[0].replace(/\+/g," "),a=["n4"];if(2<=r.length){var o;if(o=[],u=r[1])for(var u,c=(u=u.split(",")).length,s=0;s<c;s++){var f;if((f=u[s]).match(/^[\w-]+$/))if(null==(d=nt.exec(f.toLowerCase())))f="";else{if(f=null==(f=d[2])||""==f?"n":tt[f],null==(d=d[1])||""==d)d="4";else var l=J[d],d=l||(isNaN(d)?"4":d.substr(0,1));f=[f,d].join("")}else f="";f&&o.push(f)}0<o.length&&(a=o),3==r.length&&(o=[],0<(r=(r=r[2])?r.split(","):o).length&&(r=Q[r[0]])&&(t.c[i]=r))}for(t.c[i]||(r=Q[i])&&(t.c[i]=r),r=0;r<a.length;r+=1)t.a.push(new T(i,a[r]))}}(a),m(e,function(t){if(0==t.a.length)throw Error("No fonts to load!");if(-1!=t.c.indexOf("kit="))return t.c;for(var n=t.a.length,e=[],r=0;r<n;r++)e.push(t.a[r].replace(/ /g,"+"));return n=t.c+"?family="+e.join("%7C"),0<t.f.length&&(n+="&subset="+t.f.join(",")),0<t.g.length&&(n+="&text="+encodeURIComponent(t.g)),n}(r),_(n)),E(n,function(){t(a.a,a.c,rt)})},it.prototype.load=function(t){var n=this.a.id,e=this.c.o;n?g(this.c,(this.a.api||"https://use.typekit.net")+"/"+n+".js",function(n){if(n)t([]);else if(e.Typekit&&e.Typekit.config&&e.Typekit.config.fn){n=e.Typekit.config.fn;for(var r=[],i=0;i<n.length;i+=2)for(var a=n[i],o=n[i+1],u=0;u<o.length;u++)r.push(new T(a,o[u]));try{e.Typekit.load({events:!1,classes:!1,async:!0})}catch(t){}t(r)}},2e3):t([])},at.prototype.load=function(t){var n=this.f.id,e=this.c.o,r=this;n?(e.__webfontfontdeckmodule__||(e.__webfontfontdeckmodule__={}),e.__webfontfontdeckmodule__[n]=function(n,e){for(var i=0,a=e.fonts.length;i<a;++i){var o=e.fonts[i];r.a.push(new T(o.name,S("font-weight:"+o.weight+";font-style:"+o.style)))}t(r.a)},g(this.c,(this.f.api||"https://f.fontdeck.com/s/css/js/")+function(t){return t.o.location.hostname||t.a.location.hostname}(this.c)+"/"+n+".js",function(n){n&&t([])})):t([])};var ot=new V(window);ot.a.c.custom=function(t,n){return new Y(n,t)},ot.a.c.fontdeck=function(t,n){return new at(n,t)},ot.a.c.monotype=function(t,n){return new z(n,t)},ot.a.c.typekit=function(t,n){return new it(n,t)},ot.a.c.google=function(t,n){return new et(n,t)};var ut={load:o(ot.load,ot)};void 0===(r=function(){return ut}.call(n,e,n,t))||(t.exports=r)}()},,,,,,,,,function(t,n,e){"use strict";e.r(n);var r={};e.r(r),e.d(r,"create",function(){return v}),e.d(r,"clone",function(){return m}),e.d(r,"copy",function(){return g}),e.d(r,"fromValues",function(){return p}),e.d(r,"set",function(){return _}),e.d(r,"identity",function(){return E}),e.d(r,"transpose",function(){return M}),e.d(r,"invert",function(){return A}),e.d(r,"adjoint",function(){return T}),e.d(r,"determinant",function(){return b}),e.d(r,"multiply",function(){return R}),e.d(r,"translate",function(){return w}),e.d(r,"scale",function(){return S}),e.d(r,"rotate",function(){return y}),e.d(r,"rotateX",function(){return x}),e.d(r,"rotateY",function(){return C}),e.d(r,"rotateZ",function(){return P}),e.d(r,"fromTranslation",function(){return I}),e.d(r,"fromScaling",function(){return L}),e.d(r,"fromRotation",function(){return U}),e.d(r,"fromXRotation",function(){return k}),e.d(r,"fromYRotation",function(){return D}),e.d(r,"fromZRotation",function(){return W}),e.d(r,"fromRotationTranslation",function(){return N}),e.d(r,"fromQuat2",function(){return O}),e.d(r,"getTranslation",function(){return G}),e.d(r,"getScaling",function(){return F}),e.d(r,"getRotation",function(){return B}),e.d(r,"fromRotationTranslationScale",function(){return j}),e.d(r,"fromRotationTranslationScaleOrigin",function(){return H}),e.d(r,"fromQuat",function(){return X}),e.d(r,"frustum",function(){return V}),e.d(r,"perspective",function(){return K}),e.d(r,"perspectiveFromFieldOfView",function(){return z}),e.d(r,"ortho",function(){return Y}),e.d(r,"lookAt",function(){return q}),e.d(r,"targetTo",function(){return $}),e.d(r,"str",function(){return Z}),e.d(r,"frob",function(){return Q}),e.d(r,"add",function(){return J}),e.d(r,"subtract",function(){return tt}),e.d(r,"multiplyScalar",function(){return nt}),e.d(r,"multiplyScalarAndAdd",function(){return et}),e.d(r,"exactEquals",function(){return rt}),e.d(r,"equals",function(){return it}),e.d(r,"mul",function(){return ot}),e.d(r,"sub",function(){return ut});var i=e(0),a=new Map,o=function(t){var n=document.createElement("canvas"),e=n.getContext("2d");return n.width=t.canvasWidth,n.height=t.canvasHeight,e.fillStyle="blue",e.fillRect(0,0,t.canvasWidth,t.canvasHeight),n},u=function(t){var n=t.ballRadius,e=document.createElement("canvas"),r=e.getContext("2d");e.width=2*n,e.height=2*n;var i=e.width/2,a=e.height/2;return r.beginPath(),r.arc(i,a,n,0,2*Math.PI,!1),r.closePath(),r.fillStyle="white",r.fill(),e},c=function(t){var n=t.paddleWidth,e=t.paddleHeight,r=10,i=document.createElement("canvas"),a=i.getContext("2d");i.width=n,i.height=e;i.width,i.height;return n<2*r&&(r=n/2),e<2*r&&(r=e/2),a.beginPath(),a.moveTo(r,0),a.arcTo(n,0,n,e,r),a.arcTo(n,e,0,e,r),a.arcTo(0,e,0,0,r),a.arcTo(0,0,n,0,r),a.closePath(),a.fillStyle="white",a.fill(),i},s=function(t){return function(n){var e=document.createElement("canvas"),r=e.getContext("2d");return e.width=t.canvasWidth,e.height=t.canvasHeight,r.font='50px "Press Start 2P"',r.textAlign="center",r.fillStyle="white",r.textBaseline="top",r.fillText(n,e.width/2,10),e}},f=function(t){return function(n){var e=t.createTexture();return t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,1),t.bindTexture(t.TEXTURE_2D,e),l(n.width)&&l(n.height)?t.generateMipmap(t.TEXTURE_2D):(t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.LINEAR)),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,n),{texture:e,width:n.width,height:n.height}}},l=function(t){return 0==(t&t-1)},d=1e-6,h="undefined"!=typeof Float32Array?Float32Array:Array;Math.random;Math.PI;function v(){var t=new h(16);return h!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0),t[0]=1,t[5]=1,t[10]=1,t[15]=1,t}function m(t){var n=new h(16);return n[0]=t[0],n[1]=t[1],n[2]=t[2],n[3]=t[3],n[4]=t[4],n[5]=t[5],n[6]=t[6],n[7]=t[7],n[8]=t[8],n[9]=t[9],n[10]=t[10],n[11]=t[11],n[12]=t[12],n[13]=t[13],n[14]=t[14],n[15]=t[15],n}function g(t,n){return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],t[9]=n[9],t[10]=n[10],t[11]=n[11],t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15],t}function p(t,n,e,r,i,a,o,u,c,s,f,l,d,v,m,g){var p=new h(16);return p[0]=t,p[1]=n,p[2]=e,p[3]=r,p[4]=i,p[5]=a,p[6]=o,p[7]=u,p[8]=c,p[9]=s,p[10]=f,p[11]=l,p[12]=d,p[13]=v,p[14]=m,p[15]=g,p}function _(t,n,e,r,i,a,o,u,c,s,f,l,d,h,v,m,g){return t[0]=n,t[1]=e,t[2]=r,t[3]=i,t[4]=a,t[5]=o,t[6]=u,t[7]=c,t[8]=s,t[9]=f,t[10]=l,t[11]=d,t[12]=h,t[13]=v,t[14]=m,t[15]=g,t}function E(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function M(t,n){if(t===n){var e=n[1],r=n[2],i=n[3],a=n[6],o=n[7],u=n[11];t[1]=n[4],t[2]=n[8],t[3]=n[12],t[4]=e,t[6]=n[9],t[7]=n[13],t[8]=r,t[9]=a,t[11]=n[14],t[12]=i,t[13]=o,t[14]=u}else t[0]=n[0],t[1]=n[4],t[2]=n[8],t[3]=n[12],t[4]=n[1],t[5]=n[5],t[6]=n[9],t[7]=n[13],t[8]=n[2],t[9]=n[6],t[10]=n[10],t[11]=n[14],t[12]=n[3],t[13]=n[7],t[14]=n[11],t[15]=n[15];return t}function A(t,n){var e=n[0],r=n[1],i=n[2],a=n[3],o=n[4],u=n[5],c=n[6],s=n[7],f=n[8],l=n[9],d=n[10],h=n[11],v=n[12],m=n[13],g=n[14],p=n[15],_=e*u-r*o,E=e*c-i*o,M=e*s-a*o,A=r*c-i*u,T=r*s-a*u,b=i*s-a*c,R=f*m-l*v,w=f*g-d*v,S=f*p-h*v,y=l*g-d*m,x=l*p-h*m,C=d*p-h*g,P=_*C-E*x+M*y+A*S-T*w+b*R;return P?(P=1/P,t[0]=(u*C-c*x+s*y)*P,t[1]=(i*x-r*C-a*y)*P,t[2]=(m*b-g*T+p*A)*P,t[3]=(d*T-l*b-h*A)*P,t[4]=(c*S-o*C-s*w)*P,t[5]=(e*C-i*S+a*w)*P,t[6]=(g*M-v*b-p*E)*P,t[7]=(f*b-d*M+h*E)*P,t[8]=(o*x-u*S+s*R)*P,t[9]=(r*S-e*x-a*R)*P,t[10]=(v*T-m*M+p*_)*P,t[11]=(l*M-f*T-h*_)*P,t[12]=(u*w-o*y-c*R)*P,t[13]=(e*y-r*w+i*R)*P,t[14]=(m*E-v*A-g*_)*P,t[15]=(f*A-l*E+d*_)*P,t):null}function T(t,n){var e=n[0],r=n[1],i=n[2],a=n[3],o=n[4],u=n[5],c=n[6],s=n[7],f=n[8],l=n[9],d=n[10],h=n[11],v=n[12],m=n[13],g=n[14],p=n[15];return t[0]=u*(d*p-h*g)-l*(c*p-s*g)+m*(c*h-s*d),t[1]=-(r*(d*p-h*g)-l*(i*p-a*g)+m*(i*h-a*d)),t[2]=r*(c*p-s*g)-u*(i*p-a*g)+m*(i*s-a*c),t[3]=-(r*(c*h-s*d)-u*(i*h-a*d)+l*(i*s-a*c)),t[4]=-(o*(d*p-h*g)-f*(c*p-s*g)+v*(c*h-s*d)),t[5]=e*(d*p-h*g)-f*(i*p-a*g)+v*(i*h-a*d),t[6]=-(e*(c*p-s*g)-o*(i*p-a*g)+v*(i*s-a*c)),t[7]=e*(c*h-s*d)-o*(i*h-a*d)+f*(i*s-a*c),t[8]=o*(l*p-h*m)-f*(u*p-s*m)+v*(u*h-s*l),t[9]=-(e*(l*p-h*m)-f*(r*p-a*m)+v*(r*h-a*l)),t[10]=e*(u*p-s*m)-o*(r*p-a*m)+v*(r*s-a*u),t[11]=-(e*(u*h-s*l)-o*(r*h-a*l)+f*(r*s-a*u)),t[12]=-(o*(l*g-d*m)-f*(u*g-c*m)+v*(u*d-c*l)),t[13]=e*(l*g-d*m)-f*(r*g-i*m)+v*(r*d-i*l),t[14]=-(e*(u*g-c*m)-o*(r*g-i*m)+v*(r*c-i*u)),t[15]=e*(u*d-c*l)-o*(r*d-i*l)+f*(r*c-i*u),t}function b(t){var n=t[0],e=t[1],r=t[2],i=t[3],a=t[4],o=t[5],u=t[6],c=t[7],s=t[8],f=t[9],l=t[10],d=t[11],h=t[12],v=t[13],m=t[14],g=t[15];return(n*o-e*a)*(l*g-d*m)-(n*u-r*a)*(f*g-d*v)+(n*c-i*a)*(f*m-l*v)+(e*u-r*o)*(s*g-d*h)-(e*c-i*o)*(s*m-l*h)+(r*c-i*u)*(s*v-f*h)}function R(t,n,e){var r=n[0],i=n[1],a=n[2],o=n[3],u=n[4],c=n[5],s=n[6],f=n[7],l=n[8],d=n[9],h=n[10],v=n[11],m=n[12],g=n[13],p=n[14],_=n[15],E=e[0],M=e[1],A=e[2],T=e[3];return t[0]=E*r+M*u+A*l+T*m,t[1]=E*i+M*c+A*d+T*g,t[2]=E*a+M*s+A*h+T*p,t[3]=E*o+M*f+A*v+T*_,E=e[4],M=e[5],A=e[6],T=e[7],t[4]=E*r+M*u+A*l+T*m,t[5]=E*i+M*c+A*d+T*g,t[6]=E*a+M*s+A*h+T*p,t[7]=E*o+M*f+A*v+T*_,E=e[8],M=e[9],A=e[10],T=e[11],t[8]=E*r+M*u+A*l+T*m,t[9]=E*i+M*c+A*d+T*g,t[10]=E*a+M*s+A*h+T*p,t[11]=E*o+M*f+A*v+T*_,E=e[12],M=e[13],A=e[14],T=e[15],t[12]=E*r+M*u+A*l+T*m,t[13]=E*i+M*c+A*d+T*g,t[14]=E*a+M*s+A*h+T*p,t[15]=E*o+M*f+A*v+T*_,t}function w(t,n,e){var r=e[0],i=e[1],a=e[2],o=void 0,u=void 0,c=void 0,s=void 0,f=void 0,l=void 0,d=void 0,h=void 0,v=void 0,m=void 0,g=void 0,p=void 0;return n===t?(t[12]=n[0]*r+n[4]*i+n[8]*a+n[12],t[13]=n[1]*r+n[5]*i+n[9]*a+n[13],t[14]=n[2]*r+n[6]*i+n[10]*a+n[14],t[15]=n[3]*r+n[7]*i+n[11]*a+n[15]):(o=n[0],u=n[1],c=n[2],s=n[3],f=n[4],l=n[5],d=n[6],h=n[7],v=n[8],m=n[9],g=n[10],p=n[11],t[0]=o,t[1]=u,t[2]=c,t[3]=s,t[4]=f,t[5]=l,t[6]=d,t[7]=h,t[8]=v,t[9]=m,t[10]=g,t[11]=p,t[12]=o*r+f*i+v*a+n[12],t[13]=u*r+l*i+m*a+n[13],t[14]=c*r+d*i+g*a+n[14],t[15]=s*r+h*i+p*a+n[15]),t}function S(t,n,e){var r=e[0],i=e[1],a=e[2];return t[0]=n[0]*r,t[1]=n[1]*r,t[2]=n[2]*r,t[3]=n[3]*r,t[4]=n[4]*i,t[5]=n[5]*i,t[6]=n[6]*i,t[7]=n[7]*i,t[8]=n[8]*a,t[9]=n[9]*a,t[10]=n[10]*a,t[11]=n[11]*a,t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15],t}function y(t,n,e,r){var i,a,o,u,c,s,f,l,h,v,m,g,p,_,E,M,A,T,b,R,w,S,y,x,C=r[0],P=r[1],I=r[2],L=Math.sqrt(C*C+P*P+I*I);return L<d?null:(C*=L=1/L,P*=L,I*=L,i=Math.sin(e),o=1-(a=Math.cos(e)),u=n[0],c=n[1],s=n[2],f=n[3],l=n[4],h=n[5],v=n[6],m=n[7],g=n[8],p=n[9],_=n[10],E=n[11],M=C*C*o+a,A=P*C*o+I*i,T=I*C*o-P*i,b=C*P*o-I*i,R=P*P*o+a,w=I*P*o+C*i,S=C*I*o+P*i,y=P*I*o-C*i,x=I*I*o+a,t[0]=u*M+l*A+g*T,t[1]=c*M+h*A+p*T,t[2]=s*M+v*A+_*T,t[3]=f*M+m*A+E*T,t[4]=u*b+l*R+g*w,t[5]=c*b+h*R+p*w,t[6]=s*b+v*R+_*w,t[7]=f*b+m*R+E*w,t[8]=u*S+l*y+g*x,t[9]=c*S+h*y+p*x,t[10]=s*S+v*y+_*x,t[11]=f*S+m*y+E*x,n!==t&&(t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15]),t)}function x(t,n,e){var r=Math.sin(e),i=Math.cos(e),a=n[4],o=n[5],u=n[6],c=n[7],s=n[8],f=n[9],l=n[10],d=n[11];return n!==t&&(t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15]),t[4]=a*i+s*r,t[5]=o*i+f*r,t[6]=u*i+l*r,t[7]=c*i+d*r,t[8]=s*i-a*r,t[9]=f*i-o*r,t[10]=l*i-u*r,t[11]=d*i-c*r,t}function C(t,n,e){var r=Math.sin(e),i=Math.cos(e),a=n[0],o=n[1],u=n[2],c=n[3],s=n[8],f=n[9],l=n[10],d=n[11];return n!==t&&(t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15]),t[0]=a*i-s*r,t[1]=o*i-f*r,t[2]=u*i-l*r,t[3]=c*i-d*r,t[8]=a*r+s*i,t[9]=o*r+f*i,t[10]=u*r+l*i,t[11]=c*r+d*i,t}function P(t,n,e){var r=Math.sin(e),i=Math.cos(e),a=n[0],o=n[1],u=n[2],c=n[3],s=n[4],f=n[5],l=n[6],d=n[7];return n!==t&&(t[8]=n[8],t[9]=n[9],t[10]=n[10],t[11]=n[11],t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15]),t[0]=a*i+s*r,t[1]=o*i+f*r,t[2]=u*i+l*r,t[3]=c*i+d*r,t[4]=s*i-a*r,t[5]=f*i-o*r,t[6]=l*i-u*r,t[7]=d*i-c*r,t}function I(t,n){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=n[0],t[13]=n[1],t[14]=n[2],t[15]=1,t}function L(t,n){return t[0]=n[0],t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=n[1],t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=n[2],t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function U(t,n,e){var r,i,a,o=e[0],u=e[1],c=e[2],s=Math.sqrt(o*o+u*u+c*c);return s<d?null:(o*=s=1/s,u*=s,c*=s,r=Math.sin(n),a=1-(i=Math.cos(n)),t[0]=o*o*a+i,t[1]=u*o*a+c*r,t[2]=c*o*a-u*r,t[3]=0,t[4]=o*u*a-c*r,t[5]=u*u*a+i,t[6]=c*u*a+o*r,t[7]=0,t[8]=o*c*a+u*r,t[9]=u*c*a-o*r,t[10]=c*c*a+i,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t)}function k(t,n){var e=Math.sin(n),r=Math.cos(n);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=r,t[6]=e,t[7]=0,t[8]=0,t[9]=-e,t[10]=r,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function D(t,n){var e=Math.sin(n),r=Math.cos(n);return t[0]=r,t[1]=0,t[2]=-e,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=e,t[9]=0,t[10]=r,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function W(t,n){var e=Math.sin(n),r=Math.cos(n);return t[0]=r,t[1]=e,t[2]=0,t[3]=0,t[4]=-e,t[5]=r,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function N(t,n,e){var r=n[0],i=n[1],a=n[2],o=n[3],u=r+r,c=i+i,s=a+a,f=r*u,l=r*c,d=r*s,h=i*c,v=i*s,m=a*s,g=o*u,p=o*c,_=o*s;return t[0]=1-(h+m),t[1]=l+_,t[2]=d-p,t[3]=0,t[4]=l-_,t[5]=1-(f+m),t[6]=v+g,t[7]=0,t[8]=d+p,t[9]=v-g,t[10]=1-(f+h),t[11]=0,t[12]=e[0],t[13]=e[1],t[14]=e[2],t[15]=1,t}function O(t,n){var e=new h(3),r=-n[0],i=-n[1],a=-n[2],o=n[3],u=n[4],c=n[5],s=n[6],f=n[7],l=r*r+i*i+a*a+o*o;return l>0?(e[0]=2*(u*o+f*r+c*a-s*i)/l,e[1]=2*(c*o+f*i+s*r-u*a)/l,e[2]=2*(s*o+f*a+u*i-c*r)/l):(e[0]=2*(u*o+f*r+c*a-s*i),e[1]=2*(c*o+f*i+s*r-u*a),e[2]=2*(s*o+f*a+u*i-c*r)),N(t,n,e),t}function G(t,n){return t[0]=n[12],t[1]=n[13],t[2]=n[14],t}function F(t,n){var e=n[0],r=n[1],i=n[2],a=n[4],o=n[5],u=n[6],c=n[8],s=n[9],f=n[10];return t[0]=Math.sqrt(e*e+r*r+i*i),t[1]=Math.sqrt(a*a+o*o+u*u),t[2]=Math.sqrt(c*c+s*s+f*f),t}function B(t,n){var e=n[0]+n[5]+n[10],r=0;return e>0?(r=2*Math.sqrt(e+1),t[3]=.25*r,t[0]=(n[6]-n[9])/r,t[1]=(n[8]-n[2])/r,t[2]=(n[1]-n[4])/r):n[0]>n[5]&&n[0]>n[10]?(r=2*Math.sqrt(1+n[0]-n[5]-n[10]),t[3]=(n[6]-n[9])/r,t[0]=.25*r,t[1]=(n[1]+n[4])/r,t[2]=(n[8]+n[2])/r):n[5]>n[10]?(r=2*Math.sqrt(1+n[5]-n[0]-n[10]),t[3]=(n[8]-n[2])/r,t[0]=(n[1]+n[4])/r,t[1]=.25*r,t[2]=(n[6]+n[9])/r):(r=2*Math.sqrt(1+n[10]-n[0]-n[5]),t[3]=(n[1]-n[4])/r,t[0]=(n[8]+n[2])/r,t[1]=(n[6]+n[9])/r,t[2]=.25*r),t}function j(t,n,e,r){var i=n[0],a=n[1],o=n[2],u=n[3],c=i+i,s=a+a,f=o+o,l=i*c,d=i*s,h=i*f,v=a*s,m=a*f,g=o*f,p=u*c,_=u*s,E=u*f,M=r[0],A=r[1],T=r[2];return t[0]=(1-(v+g))*M,t[1]=(d+E)*M,t[2]=(h-_)*M,t[3]=0,t[4]=(d-E)*A,t[5]=(1-(l+g))*A,t[6]=(m+p)*A,t[7]=0,t[8]=(h+_)*T,t[9]=(m-p)*T,t[10]=(1-(l+v))*T,t[11]=0,t[12]=e[0],t[13]=e[1],t[14]=e[2],t[15]=1,t}function H(t,n,e,r,i){var a=n[0],o=n[1],u=n[2],c=n[3],s=a+a,f=o+o,l=u+u,d=a*s,h=a*f,v=a*l,m=o*f,g=o*l,p=u*l,_=c*s,E=c*f,M=c*l,A=r[0],T=r[1],b=r[2],R=i[0],w=i[1],S=i[2],y=(1-(m+p))*A,x=(h+M)*A,C=(v-E)*A,P=(h-M)*T,I=(1-(d+p))*T,L=(g+_)*T,U=(v+E)*b,k=(g-_)*b,D=(1-(d+m))*b;return t[0]=y,t[1]=x,t[2]=C,t[3]=0,t[4]=P,t[5]=I,t[6]=L,t[7]=0,t[8]=U,t[9]=k,t[10]=D,t[11]=0,t[12]=e[0]+R-(y*R+P*w+U*S),t[13]=e[1]+w-(x*R+I*w+k*S),t[14]=e[2]+S-(C*R+L*w+D*S),t[15]=1,t}function X(t,n){var e=n[0],r=n[1],i=n[2],a=n[3],o=e+e,u=r+r,c=i+i,s=e*o,f=r*o,l=r*u,d=i*o,h=i*u,v=i*c,m=a*o,g=a*u,p=a*c;return t[0]=1-l-v,t[1]=f+p,t[2]=d-g,t[3]=0,t[4]=f-p,t[5]=1-s-v,t[6]=h+m,t[7]=0,t[8]=d+g,t[9]=h-m,t[10]=1-s-l,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function V(t,n,e,r,i,a,o){var u=1/(e-n),c=1/(i-r),s=1/(a-o);return t[0]=2*a*u,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=2*a*c,t[6]=0,t[7]=0,t[8]=(e+n)*u,t[9]=(i+r)*c,t[10]=(o+a)*s,t[11]=-1,t[12]=0,t[13]=0,t[14]=o*a*2*s,t[15]=0,t}function K(t,n,e,r,i){var a=1/Math.tan(n/2),o=void 0;return t[0]=a/e,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=a,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,null!=i&&i!==1/0?(o=1/(r-i),t[10]=(i+r)*o,t[14]=2*i*r*o):(t[10]=-1,t[14]=-2*r),t}function z(t,n,e,r){var i=Math.tan(n.upDegrees*Math.PI/180),a=Math.tan(n.downDegrees*Math.PI/180),o=Math.tan(n.leftDegrees*Math.PI/180),u=Math.tan(n.rightDegrees*Math.PI/180),c=2/(o+u),s=2/(i+a);return t[0]=c,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=s,t[6]=0,t[7]=0,t[8]=-(o-u)*c*.5,t[9]=(i-a)*s*.5,t[10]=r/(e-r),t[11]=-1,t[12]=0,t[13]=0,t[14]=r*e/(e-r),t[15]=0,t}function Y(t,n,e,r,i,a,o){var u=1/(n-e),c=1/(r-i),s=1/(a-o);return t[0]=-2*u,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*c,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*s,t[11]=0,t[12]=(n+e)*u,t[13]=(i+r)*c,t[14]=(o+a)*s,t[15]=1,t}function q(t,n,e,r){var i=void 0,a=void 0,o=void 0,u=void 0,c=void 0,s=void 0,f=void 0,l=void 0,h=void 0,v=void 0,m=n[0],g=n[1],p=n[2],_=r[0],M=r[1],A=r[2],T=e[0],b=e[1],R=e[2];return Math.abs(m-T)<d&&Math.abs(g-b)<d&&Math.abs(p-R)<d?E(t):(f=m-T,l=g-b,h=p-R,i=M*(h*=v=1/Math.sqrt(f*f+l*l+h*h))-A*(l*=v),a=A*(f*=v)-_*h,o=_*l-M*f,(v=Math.sqrt(i*i+a*a+o*o))?(i*=v=1/v,a*=v,o*=v):(i=0,a=0,o=0),u=l*o-h*a,c=h*i-f*o,s=f*a-l*i,(v=Math.sqrt(u*u+c*c+s*s))?(u*=v=1/v,c*=v,s*=v):(u=0,c=0,s=0),t[0]=i,t[1]=u,t[2]=f,t[3]=0,t[4]=a,t[5]=c,t[6]=l,t[7]=0,t[8]=o,t[9]=s,t[10]=h,t[11]=0,t[12]=-(i*m+a*g+o*p),t[13]=-(u*m+c*g+s*p),t[14]=-(f*m+l*g+h*p),t[15]=1,t)}function $(t,n,e,r){var i=n[0],a=n[1],o=n[2],u=r[0],c=r[1],s=r[2],f=i-e[0],l=a-e[1],d=o-e[2],h=f*f+l*l+d*d;h>0&&(f*=h=1/Math.sqrt(h),l*=h,d*=h);var v=c*d-s*l,m=s*f-u*d,g=u*l-c*f;return(h=v*v+m*m+g*g)>0&&(v*=h=1/Math.sqrt(h),m*=h,g*=h),t[0]=v,t[1]=m,t[2]=g,t[3]=0,t[4]=l*g-d*m,t[5]=d*v-f*g,t[6]=f*m-l*v,t[7]=0,t[8]=f,t[9]=l,t[10]=d,t[11]=0,t[12]=i,t[13]=a,t[14]=o,t[15]=1,t}function Z(t){return"mat4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+", "+t[9]+", "+t[10]+", "+t[11]+", "+t[12]+", "+t[13]+", "+t[14]+", "+t[15]+")"}function Q(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2)+Math.pow(t[2],2)+Math.pow(t[3],2)+Math.pow(t[4],2)+Math.pow(t[5],2)+Math.pow(t[6],2)+Math.pow(t[7],2)+Math.pow(t[8],2)+Math.pow(t[9],2)+Math.pow(t[10],2)+Math.pow(t[11],2)+Math.pow(t[12],2)+Math.pow(t[13],2)+Math.pow(t[14],2)+Math.pow(t[15],2))}function J(t,n,e){return t[0]=n[0]+e[0],t[1]=n[1]+e[1],t[2]=n[2]+e[2],t[3]=n[3]+e[3],t[4]=n[4]+e[4],t[5]=n[5]+e[5],t[6]=n[6]+e[6],t[7]=n[7]+e[7],t[8]=n[8]+e[8],t[9]=n[9]+e[9],t[10]=n[10]+e[10],t[11]=n[11]+e[11],t[12]=n[12]+e[12],t[13]=n[13]+e[13],t[14]=n[14]+e[14],t[15]=n[15]+e[15],t}function tt(t,n,e){return t[0]=n[0]-e[0],t[1]=n[1]-e[1],t[2]=n[2]-e[2],t[3]=n[3]-e[3],t[4]=n[4]-e[4],t[5]=n[5]-e[5],t[6]=n[6]-e[6],t[7]=n[7]-e[7],t[8]=n[8]-e[8],t[9]=n[9]-e[9],t[10]=n[10]-e[10],t[11]=n[11]-e[11],t[12]=n[12]-e[12],t[13]=n[13]-e[13],t[14]=n[14]-e[14],t[15]=n[15]-e[15],t}function nt(t,n,e){return t[0]=n[0]*e,t[1]=n[1]*e,t[2]=n[2]*e,t[3]=n[3]*e,t[4]=n[4]*e,t[5]=n[5]*e,t[6]=n[6]*e,t[7]=n[7]*e,t[8]=n[8]*e,t[9]=n[9]*e,t[10]=n[10]*e,t[11]=n[11]*e,t[12]=n[12]*e,t[13]=n[13]*e,t[14]=n[14]*e,t[15]=n[15]*e,t}function et(t,n,e,r){return t[0]=n[0]+e[0]*r,t[1]=n[1]+e[1]*r,t[2]=n[2]+e[2]*r,t[3]=n[3]+e[3]*r,t[4]=n[4]+e[4]*r,t[5]=n[5]+e[5]*r,t[6]=n[6]+e[6]*r,t[7]=n[7]+e[7]*r,t[8]=n[8]+e[8]*r,t[9]=n[9]+e[9]*r,t[10]=n[10]+e[10]*r,t[11]=n[11]+e[11]*r,t[12]=n[12]+e[12]*r,t[13]=n[13]+e[13]*r,t[14]=n[14]+e[14]*r,t[15]=n[15]+e[15]*r,t}function rt(t,n){return t[0]===n[0]&&t[1]===n[1]&&t[2]===n[2]&&t[3]===n[3]&&t[4]===n[4]&&t[5]===n[5]&&t[6]===n[6]&&t[7]===n[7]&&t[8]===n[8]&&t[9]===n[9]&&t[10]===n[10]&&t[11]===n[11]&&t[12]===n[12]&&t[13]===n[13]&&t[14]===n[14]&&t[15]===n[15]}function it(t,n){var e=t[0],r=t[1],i=t[2],a=t[3],o=t[4],u=t[5],c=t[6],s=t[7],f=t[8],l=t[9],h=t[10],v=t[11],m=t[12],g=t[13],p=t[14],_=t[15],E=n[0],M=n[1],A=n[2],T=n[3],b=n[4],R=n[5],w=n[6],S=n[7],y=n[8],x=n[9],C=n[10],P=n[11],I=n[12],L=n[13],U=n[14],k=n[15];return Math.abs(e-E)<=d*Math.max(1,Math.abs(e),Math.abs(E))&&Math.abs(r-M)<=d*Math.max(1,Math.abs(r),Math.abs(M))&&Math.abs(i-A)<=d*Math.max(1,Math.abs(i),Math.abs(A))&&Math.abs(a-T)<=d*Math.max(1,Math.abs(a),Math.abs(T))&&Math.abs(o-b)<=d*Math.max(1,Math.abs(o),Math.abs(b))&&Math.abs(u-R)<=d*Math.max(1,Math.abs(u),Math.abs(R))&&Math.abs(c-w)<=d*Math.max(1,Math.abs(c),Math.abs(w))&&Math.abs(s-S)<=d*Math.max(1,Math.abs(s),Math.abs(S))&&Math.abs(f-y)<=d*Math.max(1,Math.abs(f),Math.abs(y))&&Math.abs(l-x)<=d*Math.max(1,Math.abs(l),Math.abs(x))&&Math.abs(h-C)<=d*Math.max(1,Math.abs(h),Math.abs(C))&&Math.abs(v-P)<=d*Math.max(1,Math.abs(v),Math.abs(P))&&Math.abs(m-I)<=d*Math.max(1,Math.abs(m),Math.abs(I))&&Math.abs(g-L)<=d*Math.max(1,Math.abs(g),Math.abs(L))&&Math.abs(p-U)<=d*Math.max(1,Math.abs(p),Math.abs(U))&&Math.abs(_-k)<=d*Math.max(1,Math.abs(_),Math.abs(k))}var at,ot=R,ut=tt,ct=function(t){var n=t.constants,e=t.gl,i=(t.canvas,t.program),a=t.camera;e.useProgram(i);var o=r.create(),u=r.create(),c=e.createBuffer();e.bindBuffer(e.ARRAY_BUFFER,c),e.bufferData(e.ARRAY_BUFFER,new Float32Array([0,1,0,0,1,1,1,0]),e.STATIC_DRAW);var s=e.getAttribLocation(i,"a_vertex");e.vertexAttribPointer(s,2,e.FLOAT,!1,0,0),e.enableVertexAttribArray(s);var f=e.getUniformLocation(i,"u_size"),l=e.getUniformLocation(i,"u_transform"),d=e.getUniformLocation(i,"u_image"),h=e.getUniformLocation(i,"u_textureSize");return function(t){e.useProgram(i),r.fromScaling(o,[n.canvasWidth,n.canvasHeight,1]);var c=a.getModelViewProjection(u);e.uniformMatrix4fv(l,!1,c),e.uniformMatrix4fv(f,!1,o),e.uniform1i(d,0),e.uniform2fv(h,Float32Array.from([n.canvasWidth,n.canvasHeight])),e.activeTexture(e.TEXTURE0),e.bindTexture(e.TEXTURE_2D,t)}},st=[1,1,1,1,1,1,1,1,1],ft=function(t){var n=t.reduce(function(t,n){return t+n});return n<=0?1:n},lt=function(t){var n,e=t.gl,r=t.canvas,i=t.programs,a=t.camera,o=t.constants,u=e.createFramebuffer(),c=dt(e)(o.canvasWidth)(o.canvasHeight),s=dt(e)(o.canvasWidth)(o.canvasHeight),f=function(t){var n=t.gl,e=t.program,r=ct(t),i=n.getUniformLocation(e,"u_kernel"),a=n.getUniformLocation(e,"u_kernelWeight");return function(t){return function(e){n.uniform1f(a,ft(t)),n.uniform1fv(i,t),r(e),n.drawArrays(n.TRIANGLE_STRIP,0,4)}}}({gl:e,constants:o,program:i.conv,camera:a,canvas:r}),l=(function(t){var n=t.gl,e=t.program,r=t.distortion,i=ct(t),a=n.getUniformLocation(e,"u_distortion");n.uniform1f(a,r)}({gl:e,constants:o,program:i.barrel,camera:a,canvas:r,distortion:1.2}),function(t){var n=t.gl,e=t.program,r=ct(t),i=n.getUniformLocation(e,"u_time")}({gl:e,constants:o,program:i.scanlines,camera:a,canvas:r}),function(t){var n=t.gl,e=(t.program,t.constants,ct(t));return function(t){e(t),n.drawArrays(n.TRIANGLE_STRIP,0,4)}}({gl:e,constants:o,program:i.crt,camera:a,canvas:r})),d=function(t){return function(r){return function(i){var a=n?c:s,u=n?s:c;e.useProgram(r),e.bindFramebuffer(e.FRAMEBUFFER,t),null!=t&&(e.bindTexture(e.TEXTURE_2D,u),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,u,0),e.viewport(0,0,o.canvasWidth,o.canvasHeight)),e.clear(e.COLOR_BUFFER_BIT|e.DEPTH_BUFFER_BIT),i(a),n=!n}}};return{render:function(t){d(u)(i.scene)(t),d(u)(i.conv)(f(st)),d(null)(i.crt)(l)}}},dt=function(t){return function(n){return function(e){var r=t.createTexture();return t.bindTexture(t.TEXTURE_2D,r),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,n,e,0,t.RGBA,t.UNSIGNED_BYTE,null),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),r}}},ht="attribute vec2 a_vertex;\n    \nvarying vec2 v_texCoord;\n    \nuniform mat4 u_transform;\nuniform mat4 u_size;\n    \nvoid main() {     \n    gl_Position = u_transform * (u_size * vec4(a_vertex,0,1));\n    v_texCoord = a_vertex;\n}\n",vt="precision mediump float;\n    \nuniform sampler2D u_image;\n\nvarying vec2 v_texCoord;\n    \nvoid main() {\n    gl_FragColor = texture2D(u_image, v_texCoord);\n}\n",mt="precision mediump float;\n\nuniform sampler2D u_image;\nuniform vec2 u_textureSize;\nuniform float u_kernel[9];\nuniform float u_kernelWeight;\n \n// the texCoords passed in from the vertex shader.\nvarying vec2 v_texCoord;\n \nvoid main() {\n    vec2 pos = v_texCoord;\n    gl_FragColor = texture2D(u_image, pos);\n\n    //Convolution (blur)\n    if(gl_FragColor.a > 0.0) {\n        vec2 onePixel = vec2(1.0, 1.0) / u_textureSize;\n        vec4 colorSum =\n            texture2D(u_image, v_texCoord + onePixel * vec2(-1, -1)) * u_kernel[0] +\n            texture2D(u_image, v_texCoord + onePixel * vec2( 0, -1)) * u_kernel[1] +\n            texture2D(u_image, v_texCoord + onePixel * vec2( 1, -1)) * u_kernel[2] +\n            texture2D(u_image, v_texCoord + onePixel * vec2(-1,  0)) * u_kernel[3] +\n            texture2D(u_image, v_texCoord + onePixel * vec2( 0,  0)) * u_kernel[4] +\n            texture2D(u_image, v_texCoord + onePixel * vec2( 1,  0)) * u_kernel[5] +\n            texture2D(u_image, v_texCoord + onePixel * vec2(-1,  1)) * u_kernel[6] +\n            texture2D(u_image, v_texCoord + onePixel * vec2( 0,  1)) * u_kernel[7] +\n            texture2D(u_image, v_texCoord + onePixel * vec2( 1,  1)) * u_kernel[8] ;\n\n        // Divide the sum by the weight but just use rgb\n        // we'll set alpha to 1.0\n        gl_FragColor = vec4((colorSum / u_kernelWeight).rgb, 1.0);\n    }\n\n}\n",gt="precision mediump float;\n\nconst float PI = 3.1415926535;\n\nuniform sampler2D u_image;\nuniform float u_distortion;\n\nvarying vec2 v_texCoord;\n\nvec2 Distort(vec2 p)\n{\n    float theta  = atan(p.y, p.x);\n    float radius = length(p);\n    radius = pow(radius, u_distortion);\n    p.x = radius * cos(theta);\n    p.y = radius * sin(theta);\n    return 0.5 * (p + 1.0);\n}\n\nvoid main()\n{\n  vec2 uv = v_texCoord;\n  vec2 xy = 2.0 * uv - 1.0;\n  float d = length(xy);\n  if (d < 1.0)\n  {\n    uv = Distort(xy);\n  }\n  vec4 c = texture2D(u_image, uv);\n  gl_FragColor = c;\n}\n",pt="precision mediump float;\n/*\n    Old CRT Monitor Effect Fragment Shader.\n*/\nuniform sampler2D u_image;\nuniform float u_time;\n\nvarying vec2 v_texCoord;\n\nvoid main()\n{\n  vec3 color = texture2D(u_image, v_texCoord).rgb;\n\n  color -= abs(sin(v_texCoord.y * 100.0 + u_time * 5.0)) * 0.08; // (1)\n  color -= abs(sin(v_texCoord.y * 300.0 - u_time * 10.0)) * 0.05; // (2)\n\n  gl_FragColor = vec4(color, 1.0).rgba;\n}\n",_t="/*\n    crt-pi - A Raspberry Pi friendly CRT shader.\n\n    Copyright (C) 2015-2016 davej\n\n    This program is free software; you can redistribute it and/or modify it\n    under the terms of the GNU General Public License as published by the Free\n    Software Foundation; either version 2 of the License, or (at your option)\n    any later version.\n\n\nNotes:\n\nThis shader is designed to work well on Raspberry Pi GPUs (i.e. 1080P @ 60Hz on a game with a 4:3 aspect ratio). It pushes the Pi's GPU hard and enabling some features will slow it down so that it is no longer able to match 1080P @ 60Hz. You will need to overclock your Pi to the fastest setting in raspi-config to get the best results from this shader: 'Pi2' for Pi2 and 'Turbo' for original Pi and Pi Zero. Note: Pi2s are slower at running the shader than other Pis, this seems to be down to Pi2s lower maximum memory speed. Pi2s don't quite manage 1080P @ 60Hz - they drop about 1 in 1000 frames. You probably won't notice this, but if you do, try enabling FAKE_GAMMA.\n\nSCANLINES enables scanlines. You'll almost certainly want to use it with MULTISAMPLE to reduce moire effects. SCANLINE_WEIGHT defines how wide scanlines are (it is an inverse value so a higher number = thinner lines). SCANLINE_GAP_BRIGHTNESS defines how dark the gaps between the scan lines are. Darker gaps between scan lines make moire effects more likely.\n\nGAMMA enables gamma correction using the values in INPUT_GAMMA and OUTPUT_GAMMA. FAKE_GAMMA causes it to ignore the values in INPUT_GAMMA and OUTPUT_GAMMA and approximate gamma correction in a way which is faster than true gamma whilst still looking better than having none. You must have GAMMA defined to enable FAKE_GAMMA.\n\nCURVATURE distorts the screen by CURVATURE_X and CURVATURE_Y. Curvature slows things down a lot.\n\nBy default the shader uses linear blending horizontally. If you find this too blury, enable SHARPER.\n\nBLOOM_FACTOR controls the increase in width for bright scanlines.\n\n*/\n\n\n// Haven't put these as parameters as it would slow the code down.\n//#define SCANLINES\n#define MULTISAMPLE\n#define GAMMA\n#define FAKE_GAMMA\n#define CURVATURE\n#define SHARPER\n// MASK_TYPE: 0 = none, 1 = green/magenta, 2 = trinitron(ish)\n#define MASK_TYPE 2\n\n\n#define COMPAT_PRECISION mediump\nprecision mediump float;\n\n#define CURVATURE_X 0.10\n#define CURVATURE_Y 0.25\n#define MASK_BRIGHTNESS 0.70\n#define SCANLINE_WEIGHT 6.0\n#define SCANLINE_GAP_BRIGHTNESS 0.12\n#define BLOOM_FACTOR 1.5\n#define INPUT_GAMMA 2.4\n#define OUTPUT_GAMMA 2.2\n\n\nuniform vec2 u_textureSize;\n#if defined(CURVATURE)\n    varying vec2 screenScale;\n#endif\nvarying float filterWidth;\nvarying vec2 v_texCoord;\n\n#if defined(VERTEX)\n    attribute vec2 a_vertex;\n    uniform mat4 u_transform;\n    uniform mat4 u_size;\n    uniform vec2 u_inputSize;\n    uniform vec2 u_outputSize;\n    void main() {\n        #if defined(CURVATURE)\n\t    screenScale = vec2(1.0, 1.0); //u_textureSize / u_inputSize;\n        #endif\n\tfilterWidth = 1.0 / 3.0; //(u_inputSize.y / u_outputSize.y) / 3.0;\n        v_texCoord = a_vertex;\n        gl_Position = u_transform * (u_size * vec4(a_vertex,0,1));\n    }\n#endif\n\n#if defined(FRAGMENT)\n\n    uniform sampler2D u_image;\n\n    #if defined(CURVATURE)\n        vec2 CURVATURE_DISTORTION = vec2(CURVATURE_X, CURVATURE_Y);\n        // Barrel distortion shrinks the display area a bit, this will allow us to counteract that.\n        vec2 barrelScale = 1.0 - (0.23 * CURVATURE_DISTORTION);\n\n        vec2 Distort(vec2 coord) {\n\t    coord *= screenScale;\n\t    coord -= vec2(0.5);\n\t    float rsq = coord.x * coord.x + coord.y * coord.y;\n\t    coord += coord * (CURVATURE_DISTORTION * rsq);\n\t    coord *= barrelScale;\n\t    if (abs(coord.x) >= 0.5 || abs(coord.y) >= 0.5) {\n\t\tcoord = vec2(-1.0);\t\t// If out of bounds, return an invalid value.\n            } else {\n\t\tcoord += vec2(0.5);\n\t\tcoord /= screenScale;\n\t    }\n\n\t    return coord;\n        }\n    #endif\n\n    float CalcScanLineWeight(float dist) {\n\treturn max(1.0-dist*dist*SCANLINE_WEIGHT, SCANLINE_GAP_BRIGHTNESS);\n    }\n\n    float CalcScanLine(float dy) {\n\tfloat scanLineWeight = CalcScanLineWeight(dy);\n        #if defined(MULTISAMPLE)\n\t    scanLineWeight += CalcScanLineWeight(dy-filterWidth);\n\t    scanLineWeight += CalcScanLineWeight(dy+filterWidth);\n\t    scanLineWeight *= 0.3333333;\n        #endif\n\treturn scanLineWeight;\n    }\n\n    void main() {\n        #if defined(CURVATURE)\n\t    vec2 texcoord = Distort(v_texCoord);\n\t    if (texcoord.x < 0.0) {\n\t\tgl_FragColor = vec4(0.0);\n            } else {\n        #else\n\t        vec2 texcoord = v_texCoord;\n        #endif\n\t    vec2 texcoordInPixels = texcoord * u_textureSize;\n                #if defined(SHARPER)\n\t\t    vec2 tempCoord = floor(texcoordInPixels) + 0.5;\n\t\t    vec2 coord = tempCoord / u_textureSize;\n\t\t    vec2 deltas = texcoordInPixels - tempCoord;\n\t\t    float scanLineWeight = CalcScanLine(deltas.y);\n\t\t    vec2 signs = sign(deltas);\n\t\t    deltas.x *= 2.0;\n\t\t    deltas = deltas * deltas;\n\t\t    deltas.y = deltas.y * deltas.y;\n\t\t    deltas.x *= 0.5;\n\t\t    deltas.y *= 8.0;\n\t\t    deltas /= u_textureSize;\n\t\t    deltas *= signs;\n\t\t    vec2 tc = coord + deltas;\n                #else\n\t\t    float tempY = floor(texcoordInPixels.y) + 0.5;\n\t\t    float yCoord = tempY / u_textureSize.y;\n\t\t    float dy = texcoordInPixels.y - tempY;\n\t\t    float scanLineWeight = CalcScanLine(dy);\n\t\t    float signY = sign(dy);\n\t\t    dy = dy * dy;\n\t\t    dy = dy * dy;\n\t\t    dy *= 8.0;\n\t\t    dy /= u_textureSize.y;\n\t\t    dy *= signY;\n\t\t    vec2 tc = vec2(texcoord.x, yCoord + dy);\n                #endif\n\n\t\tvec3 colour = texture2D(u_image, tc).rgb;\n\n                #if defined(SCANLINES)\n                    #if defined(GAMMA)\n                        #if defined(FAKE_GAMMA)\n\t\t            colour = colour * colour;\n                        #else\n\t\t            colour = pow(colour, vec3(INPUT_GAMMA));\n                    #endif\n                #endif\n\t\tscanLineWeight *= BLOOM_FACTOR;\n\t\tcolour *= scanLineWeight;\n\n                #if defined(GAMMA)\n                    #if defined(FAKE_GAMMA)\n\t\t        colour = sqrt(colour);\n                    #else\n\t\t        colour = pow(colour, vec3(1.0/OUTPUT_GAMMA));\n                    #endif\n                #endif\n        #endif\n        #if MASK_TYPE == 0\n            gl_FragColor = vec4(colour, 1.0);\n        #else\n            #if MASK_TYPE == 1\n\t\tfloat whichMask = fract(gl_FragCoord.x * 0.5);\n\t\tvec3 mask;\n\t\tif (whichMask < 0.5)\n\t\t\tmask = vec3(MASK_BRIGHTNESS, 1.0, MASK_BRIGHTNESS);\n\t\telse\n\t\t\tmask = vec3(1.0, MASK_BRIGHTNESS, 1.0);\n            #elif MASK_TYPE == 2\n\t\tfloat whichMask = fract(gl_FragCoord.x * 0.3333333);\n\t\tvec3 mask = vec3(MASK_BRIGHTNESS, MASK_BRIGHTNESS, MASK_BRIGHTNESS);\n\t\tif (whichMask < 0.3333333)\n\t\t\tmask.x = 1.0;\n\t\telse if (whichMask < 0.6666666)\n\t\t\tmask.y = 1.0;\n\t\telse\n\t\t\tmask.z = 1.0;\n            #endif\n\n\t    gl_FragColor = vec4(colour * mask, 1.0);\n        #endif\n\n    #if defined(CURVATURE)\n        }\n    #endif \n}\n#endif\n",Et={vertex:"#define VERTEX\n"+_t,fragment:"#define FRAGMENT\n"+_t},Mt=function(t){return new Promise(function(n,e){var s=At(t),l=Tt(s)({premultipliedAlpha:!1}),d=[{vertex:ht,fragment:vt},{vertex:ht,fragment:mt},{vertex:ht,fragment:gt},{vertex:ht,fragment:pt},Et].map(Rt(l)),h=d.find(function(t){return t instanceof Error});if(h)e(h);else{var v={scene:d[0],conv:d[1],barrel:d[2],scanlines:d[3],crt:d[4]};!function(t){return function(n){a.set(i.RenderableId.BALL,f(n)(u(t))),a.set(i.RenderableId.PADDLE1,f(n)(c(t))),a.set(i.RenderableId.PADDLE2,f(n)(c(t))),a.set(i.RenderableId.BG,f(n)(o(t)))}}(t)(l),l.clearColor(0,0,0,0),l.enable(l.BLEND),l.blendFunc(l.SRC_ALPHA,l.ONE_MINUS_SRC_ALPHA);var m=function(t){var n=r.create(),e=r.ortho(new Float64Array(16),0,t.canvasWidth,0,t.canvasHeight,0,1);return{getModelViewProjection:function(t){var i=r.create();return r.multiply(i,n,t),r.multiply(i,e,i),i}}}(t),g=bt({gl:l,canvas:s,constants:t}),p=function(t){var n=t.gl,e=(t.canvas,t.program),o=t.camera;n.useProgram(e);var u=r.create(),c=r.create(),s=n.createBuffer();n.bindBuffer(n.ARRAY_BUFFER,s),n.bufferData(n.ARRAY_BUFFER,new Float32Array([0,1,0,0,1,1,1,0]),n.STATIC_DRAW);var f=n.getAttribLocation(e,"a_vertex");n.vertexAttribPointer(f,2,n.FLOAT,!1,0,0),n.enableVertexAttribArray(f);var l=n.getUniformLocation(e,"u_size"),d=n.getUniformLocation(e,"u_transform"),h=n.getUniformLocation(e,"u_image");n.uniform1i(h,0);var v=function(t){var e=a.get(t.id);r.fromTranslation(c,[null!=t.x?t.x-e.width/2:0,null!=t.y?t.y-e.height/2:0,0]);var i=o.getModelViewProjection(c);n.uniformMatrix4fv(d,!1,i),r.fromScaling(u,[e.width,e.height,1]),n.uniformMatrix4fv(l,!1,u),n.activeTexture(n.TEXTURE0),n.bindTexture(n.TEXTURE_2D,e.texture),n.drawArrays(n.TRIANGLE_STRIP,0,4)};return function(t){v({id:i.RenderableId.BG}),t.forEach(v)}}({gl:l,constants:t,canvas:s,program:v.scene,camera:m}),_=lt({gl:l,canvas:s,programs:v,camera:m,constants:t}),E=function(){g({width:window.innerWidth,height:window.innerHeight})};E(),window.addEventListener("resize",E),n({gl:l,render:function(t){_.render(function(){return p(t)})},canvas:s})}})},At=function(t){var n=document.createElement("canvas");return n.style.position="absolute",n.setAttribute("width",""+t.canvasWidth),n.setAttribute("height",""+t.canvasHeight),document.getElementById("app").appendChild(n),n},Tt=function(t){return function(n){return t.getContext("webgl",n)||t.getContext("experimental-webgl",n)}},bt=function(t){var n=t.gl,e=t.canvas,r=t.constants,i={};return function(t){if(i.width!==t.width||i.height!==t.height){var a=Math.min(t.width/r.canvasWidth,t.height/r.canvasHeight),o=r.canvasWidth*a,u=r.canvasHeight*a;e.style.left=(t.width-o)/2+"px",e.style.top=(t.height-u)/2+"px",e.style.width=o+"px",e.style.height=u+"px",n.viewport(0,0,n.drawingBufferWidth,n.drawingBufferHeight),i.width=t.width,i.height=t.height}}},Rt=function(t){return function(n){var e,r,i=t.createProgram(),a=function(){void 0!==e&&e instanceof WebGLShader&&t.deleteShader(e),void 0!==r&&r instanceof WebGLShader&&t.deleteShader(r),t.deleteProgram(i)},o=function(n){return function(e){var r=t.createShader(n);if(t.shaderSource(r,e),t.compileShader(r),!t.getShaderParameter(r,t.COMPILE_STATUS)){var a=function(n){return n===t.VERTEX_SHADER?"vertex":"fragment"}(n)+" error: "+t.getShaderInfoLog(r);throw new Error(a)}return t.attachShader(i,r),r}};return(e=o(t.VERTEX_SHADER)(n.vertex))instanceof Error?(a(),e):(r=o(t.FRAGMENT_SHADER)(n.fragment))instanceof Error?(a(),r):(t.linkProgram(i),t.getProgramParameter(i,t.LINK_STATUS)?(t.useProgram(i),i):(a(),new Error("Unable to initialize the shader program: "+t.getProgramInfoLog(i))))}},wt=e(1),St=function(t){var n,e=new Map,r=wt.a.NEUTRAL,i=(n=wt.a,Object.keys(n).map(function(t){return n[t]})),a=yt(function(n){var a=n.controller,o=n.status,u=r;if(e.set(a,o),o===at.START)r===wt.a.NEUTRAL&&(r=a);else if(o===at.STOP&&r===a){var c=i.find(function(t){return e.get(t)===at.START});r=c||wt.a.NEUTRAL}r!==u&&t(r)});return function(){a()}},yt=function(t){var n=new Map;n.set("KeyS",wt.a.DOWN),n.set("ArrowDown",wt.a.DOWN),n.set("KeyW",wt.a.UP),n.set("ArrowUp",wt.a.UP),n.set("Space",wt.a.SERVE),n.set(" ",wt.a.SERVE);var e=function(e){var r=e.code||e.key;!n.has(r)||"keyup"!==e.type&&"keydown"!==e.type||t({controller:n.get(r),status:"keydown"===e.type?at.START:at.STOP})};return document.addEventListener("keydown",e,!0),document.addEventListener("keyup",e,!0),function(){document.removeEventListener("keydown",e,!0),document.removeEventListener("keyup",e,!0)}};!function(t){t[t.START=0]="START",t[t.STOP=1]="STOP"}(at||(at={}));var xt,Ct,Pt,It,Lt=function(){var t=document.createElement("canvas");return t.style.position="absolute",t.style.left="0px",t.style.top="0px",t.style.width="100%",t.style.height="100%",t.style.zIndex="-1000",t.setAttribute("width","100%"),t.setAttribute("height","100%"),document.getElementById("app").appendChild(t),t},Ut=function(t){return t.getContext("2d")},kt=function(t){return function(n){return function(){var e=t.width,r=t.height,i=Math.min(e,r);n.clearRect(0,0,e,r);var a=n.createRadialGradient(.3*e,.3*r,0,.7*e,.7*r,i);a.addColorStop(0,"rgba(19, 57, 114, 1)"),a.addColorStop(1,"rgba(13, 34, 66, 1)"),n.fillStyle="black",n.fillRect(0,0,e,r)}}},Dt=function(t){return function(n){var e={1:0,2:0},r=function(t){return e[t]},o=function(){var e=r(1)+" | "+r(2);!function(t){return function(n){return function(e){a.set(i.RenderableId.SCOREBOARD,f(n)(s(t)(e)))}}}(t)(n.gl)(e)};return o(),{addPoint:function(t){e[t]++,o()},getScore:r}}},Wt=((xt=window.AudioContext||window.webkitAudioContext||void 0)||alert("Sorry, but the Web Audio API is not supported by your browser."),new xt),Nt=function(t){return function(n){var e=Wt.createOscillator();e.type="square",e.frequency.setValueAtTime(t,Wt.currentTime),e.connect(Wt.destination),e.start(),setTimeout(function(){return e.stop()},n)}},Ot=e(11),Gt=e.n(Ot),Ft={buildMode:"production",buildVersion:"0.0.1-alpha",isProduction:!0},Bt=Ft.buildVersion,jt=Ft.isProduction;console.log("%c FRPong "+Bt+" (productionMode: "+jt+")",'color: #4286f4; font-size: large; font-family: "Comic Sans MS", cursive, sans-serif');var Ht=new Worker("./mainWorker.js");!function(){var t=Lt(),n=Ut(t),e=kt(t)(n),r=function(){e()};r(),window.addEventListener("resize",r)}(),Gt.a.load({google:{families:["Press Start 2P"]},active:function(){Ht.postMessage({cmd:i.WorkerCommand.WORKER_START})}}),Ht.addEventListener(i.MESSAGE,function(t){switch(t.data.cmd){case i.WorkerCommand.WORKER_READY:var n=t.data.constants;Mt(n).then(function(t){Ct=t,Pt=Dt(n)(Ct),requestAnimationFrame(function(t){return Ht.postMessage({cmd:i.WorkerCommand.TICK,now:t})})});break;case i.WorkerCommand.RENDER:var e=void 0===It;It=t.data.renderables,e&&Xt();break;case i.WorkerCommand.COLLISION:var r=t.data.collisionName;"leftWall"===r?Pt.addPoint(2):"rightWall"===r&&Pt.addPoint(1),function(t){switch(t){case"paddle1":case"paddle2":Nt(440)(100);break;case"leftWall":Nt(110)(200);break;case"rightWall":Nt(880)(200);break;default:Nt(320)(100)}}(r)}});var Xt=function(){var t=function(n){null!=It&&(Ct.render(It.concat([{id:i.RenderableId.SCOREBOARD}])),It=null,Ht.postMessage({cmd:i.WorkerCommand.TICK,now:n})),requestAnimationFrame(t)};requestAnimationFrame(t),St(function(t){Ht.postMessage({cmd:i.WorkerCommand.CONTROLLER1,controller:t})})}}]);